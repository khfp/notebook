<!--
 * @Author: your name
 * @Date: 2020-06-08 16:46:15
 * @LastEditTime: 2020-06-08 16:54:17
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \GitHubnotebook\面试题笔记\Mysql.md
--> 

## Mysql

## 1. 索引的本质

索引是帮助Mysql高校获取数据的排好序的数据结构

索引数据结构:

- 二叉树
- 黑红树
- Hash表(不适合范围查找)
- B-tree

### B-Tree

- 叶节点具有相同的深度，叶节点的指针为空
- 所有索引不重复
- 节点中的数据索引从左到右递增排列

### B+Tree(B-Tree变种)

- 非叶子结点不存储data,只存储索引，可以放更多的索引
- 叶子结点包括所有索引字段
- 叶子结点用指针连接，提高区间访问性能

## MyISAM存储引擎索引实现

- MyISAM索引文件(.myi)和数据文件(.myd)是分离的(非聚集)

## InnoDB存储引擎索引实现

### InnoDB索引实现

- 表数据文件本身就是按照B+ Tree组织的一个索引结构文件
- **聚集索引**-叶节点包含了完整的数据记录
- InnoDB表必须有主键，并且推荐使用整形的自增主键(整形提高查找速度)

## 索引最左前缀原理

### 联合索引的底层存储结构

## Mysql什么时候适合建索引，什么时候不适合建索引

1. 哪些情况需要
   - 主键自动建立唯一索引
   - 频繁作为查询条件的字段应该创建索引
   - 查询中与其他表关联的字段，外键关系建立索引
   - 单键/组合索引的选择问题，组合索引的性价比更高
   - 查询中排序的字段，排序字段通过索引去访问将大大提高排序速度
   - 查询中统计或者分组字段
2. 哪些情况不需要
   - 表记录太少
   - 经常增删改的表或者字段
   - where条件里用不到的字段不创建索引
   - 过滤性不好的不适合做索引 
