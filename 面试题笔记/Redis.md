<!--
 * @Author: your name
 * @Date: 2020-06-12 00:16:54
 * @LastEditTime: 2020-06-12 15:00:02
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \GitHubnotebook\面试题笔记\Redis.md
--> 

## Redis持久化

1. RDB
在指定时间间隔内将内存中的数据集快照写入磁盘，也就是行话讲的Snapshot快照，它恢复时是将快照文件直接读到内存里
   - 备份是如何执行的？
      - Redis会单独创建(fork)一个子进程进行持久化，会先将数据写入到一个临时文件中，待持久化过程都结束了，再用这个临时文件替换上次持久化好的文件。整个过程中，主进程不需要进行任何IO操作这就确保了极高的性能。如果需要进行大规模的数据的恢复，且对数据恢复的完整性不是非常敏感，那RDB方式要比AOF方式更加的高效。RDB的缺点是最后一次持久化后的数据可能丢失。
   - rbd的优点
     - 节省磁盘空间
     - 恢复速度快
   - rdb的缺点
     - 虽然Redis在fork时使用了写实拷贝技术，但是如果数据庞大时还是比较消耗性能
     - 在备份周期在一定时间间隔做一次备份，所以如果Redis以外down掉的话，就会丢失最后一次快照后的所有修改

2. AOF
   以日志的形式来记录每个写操作，将Redis执行过得所有写指令记录下来(读操作不记录),只许追加文件但不可以修改文件，Redis在启动之初会读取该文件重新构建数据。换而言之Redis重启的话就是根据日志日志内容将写指令从前到后执行一次以完成数据的恢复工作。
   - AOF的优点
     - 备份机制更加稳健，丢失数据概率更低
     - 可读的日志文本，通过操作AOF稳健，可以处理误操作。
   - AOF的缺点
     - 比RDB占用更多的磁盘空间
     - 恢复备份速度要慢
     - 每次读写都同步的话，有一定的性能压力
     - 存在个别Bug,造成不能恢复

## Resdis 在项目中的使用场景

|数据类型|使用场景|
|-|-|
|String||
|hash||
|list||
|set||
|Zset||
